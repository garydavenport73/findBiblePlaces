!function n(r,a,i){function s(t,e){if(!a[t]){if(!r[t]){var o="function"==typeof require&&require;if(!e&&o)return o(t,!0);if(m)return m(t,!0);throw(o=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",o}o=a[t]={exports:{}},r[t][0].call(o.exports,function(e){return s(r[t][1][e]||e)},o,o.exports,n,r,a,i)}return a[t].exports}for(var m="function"==typeof require&&require,e=0;e<i.length;e++)s(i[e]);return s}({1:[function(e,t,o){!function(){var n=window.analytics=window.analytics||[];if(!n.initialize)if(n.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{n.invoked=!0,n.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on"],n.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);return e.unshift(t),n.push(e),n}};for(var e=0;e<n.methods.length;e++){var t=n.methods[e];n[t]=n.factory(t)}n.load=function(e,t){var o=document.createElement("script");o.type="text/javascript",o.async=!0,o.src="https://cs.moz.com/analytics.js/v1/"+e+"/analytics.min.js",o.onerror=function(){_mtm.debugger.log("mtm:pre:analytics.js","analytics.js failed to load")},o.onload=_mtm.triggers.triggerSegmentLoaded;e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(o,e),n._loadOptions=t},n.SNIPPET_VERSION="4.1.0"}}(),"function"!=typeof window.CustomEvent&&(window.CustomEvent=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:null};var o=document.createEvent("CustomEvent");return o.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),o});["production","staging","development"].indexOf(_mtm.config.env),_mtm.config.eventMaps=[{original:"moz-inbound.forge.form-completed",condition:function(e){return window.location.pathname.startsWith("/checkout/local/review")&&"checkout/summary/create/single"===e.properties.formName},transform:"moz_user_app_local_location_purchase_clicked",integrations:{Intercom:!0}},{original:"moz_user_hubspot_form_submitted_location-audit",transform:"moz_user_hubspot_form_submitted_location_audit"},{original:"moz-inbound.hsform.location-audit.submitted",transform:"moz_user_hubspot_form_submitted_location_audit"},{original:"moz-inbound.forge.form-completed",condition:function(e){return/\/checkout\/(freetrial|signup)/.test(window.location.pathname)&&"checkout/summary/create/single"===e.properties.formName},transform:"moz_user_app_search_purchase_clicked"},{original:"moz-pro.keyword-limit-reached",transform:"moz_account_search_app_analytics_keywords_100percent",account_owner_only:!0,integrations:{Intercom:!0}},{original:"moz-pro.campaign-limit-reached",transform:"moz_account_search_app_analytics_campaigns_100percent",account_owner_only:!0,integrations:{Intercom:!0}},{original:"moz-pro.pro-campaign-links-visited",transform:"moz_user_app_search_campaigns_links_visited",account_owner_only:!1},{original:"moz-pro.competitors-step.finish-campaign-clicked",transform:"moz_user_app_search_campaign_created",account_owner_only:!1,integrations:{Intercom:!0}},{original:"moz-pro.create-custom-report",transform:"moz_user_app_search_custom_report_created",account_owner_only:!1},{original:"moz-pro.pro-links-explorer-search",transform:"moz_user_app_search_links_explorer_searched",account_owner_only:!1},{original:"moz-pro.completed-signup-questionnaire",transform:"moz_user_app_search_questionnaire_completed",properties:{moz_user_search_signup_reason:function(e){return e.properties.question},label:function(e){return e.properties.question}},integrations:{All:!1,HubSpot:!0,"Google Analytics":!0}},{original:"moz-pro.settings.ga-connected",transform:"moz_user_app_search_analytics_campaign_ga_connected"},{original:"moz-pro.banners.demo-signup-click",transform:"moz_user_click_demo_cta",properties:{label:function(e){return"app_walkthrough_"+e.properties.placement.replace(/\./g,"_")},category:"Onboarding Events"},integrations:{All:!1,"Google Analytics":!0,Intercom:!1}},{original:"moz-pro.banners.free-trial-demo-click",transform:"moz_user_click_demo_cta",properties:{label:function(e){return"app_countdown_"+e.properties.placement.replace(/\./g,"_")},category:"Onboarding Events"},integrations:{All:!1,"Google Analytics":!0,Intercom:!1}},{original:"moz-pro.did-it.todos.did",condition:function(e){return"scheduleWalkthrough"===e.properties.key},transform:"moz_user_click_demo_cta",properties:{label:"app_walkthrough_todo_onboarding",category:"Onboarding Events"},integrations:{All:!1,"Google Analytics":!0,Intercom:!1}},{original:"moz-pro.banners.campaign-empty-state-demo-signup-click",transform:"moz_user_click_demo_cta",properties:{label:"app_empty-campaign_banner_content",category:"Onboarding Events"},integrations:{All:!1,"Google Analytics":!0,Intercom:!1}},{original:"home.click.link.walkthrough",transform:"moz_user_click_demo_cta",properties:{label:"home_walkthrough_tile",category:"Onboarding Events"},integrations:{All:!1,"Google Analytics":!0,Intercom:!1}},{original:"globalnav.click.link.walkthrough",transform:"moz_user_click_demo_cta",properties:{label:"globalnav_walkthrough_link",category:"Onboarding Events"},integrations:{All:!1,"Google Analytics":!0,Intercom:!1}},{original:"moz-pro.welcome.questionnaire-completed",transform:"moz_user_welcome_flow_questionnaire_completed",properties:{label:"A/B test January 2021",category:"Onboarding Events"},integrations:{All:!1,"Google Analytics":!0,Intercom:!1}},{original:"moz-pro.welcome.meet-now-clicked",transform:"moz_user_welcome_flow_click_meet_now",properties:{label:"A/B test January 2021",category:"Onboarding Events"},integrations:{All:!1,"Google Analytics":!0,Intercom:!1}},{original:"moz-pro.welcome.schedule-meeting-clicked",transform:"moz_user_welcome_flow_click_schedule_meeting",properties:{label:"A/B test January 2021",category:"Onboarding Events"},integrations:{All:!1,"Google Analytics":!0,Intercom:!1}},{original:"moz-pro.welcome.create-campaign-clicked",transform:"moz_user_welcome_flow_click_create_campaign",properties:{label:"A/B test January 2021",category:"Onboarding Events"},integrations:{All:!1,"Google Analytics":!0,Intercom:!1}},{original:"moz-pro.welcome.go-to-pro-clicked",transform:"moz_user_welcome_flow_click_go_to_pro",properties:{label:"A/B test January 2021",category:"Onboarding Events"},integrations:{All:!1,"Google Analytics":!0,Intercom:!1}},{original:"moz-pro.welcome.next-step-clicked",condition:function(e){return 1===e.properties.step},transform:"moz_user_welcome_flow_meeting_step_completed",properties:{label:"A/B test January 2021",category:"Onboarding Events"},integrations:{All:!1,"Google Analytics":!0,Intercom:!1}},{original:"moz-pro.welcome.previous-step-clicked",condition:function(e){return 2===e.properties.step},transform:"moz_user_welcome_flow_click_prev_to_lets_chat",properties:{label:"A/B test January 2021",category:"Onboarding Events"},integrations:{All:!1,"Google Analytics":!0,Intercom:!1}},{original:"moz-inbound.forge.form-completed",condition:function(e){return"community/profile/with-lma-beta"===e.properties.formName},transform:"moz_user_app_lma_beta_signup_clicked",integrations:{All:!1,"Google Analytics":!0}},{original:"local-search.lma.competitor-comparison-toggle",transform:"moz_user_app_lma_competitor_comparison_toggle",account_owner_only:!1},{original:"local-search.lma.competitor-detail",transform:"moz_user_app_lma_competitor_detail",account_owner_only:!1},{original:"local-search.lma.dashboard-drilldown-competitor",transform:"moz_user_app_lma_dashboard_drilldown_competitor",account_owner_only:!1},{original:"local-search.lma.dashboard-drilldown-keyword",transform:"moz_user_app_lma_dashboard_drilldown_keyword",account_owner_only:!1},{original:"local-search.lma.dashboard-drilldown-market",transform:"moz_user_app_lma_dashboard_drilldown_market",account_owner_only:!1},{original:"local-search.lma.keyword-added",transform:"moz_user_app_lma_keyword_added",account_owner_only:!1},{original:"local-search.lma.keyword-removed",transform:"moz_user_app_lma_keyword_removed",account_owner_only:!1},{original:"local-search.lma.map-interaction-pan",transform:"moz_user_app_lma_map_interaction_pan",account_owner_only:!1},{original:"local-search.lma.map-interaction-zoom",transform:"moz_user_app_lma_map_interaction_zoom",account_owner_only:!1},{original:"local-search.lma.market-added",transform:"moz_user_app_lma_market_added",account_owner_only:!1},{original:"local-search.lma.market-movement-timeframe-changed",transform:"moz_user_app_lma_market_movement_timeframe_changed",account_owner_only:!1},{original:"local-search.lma.market-removed",transform:"moz_user_app_lma_market_removed",account_owner_only:!1},{original:"local-search.lma.rankings-detail",transform:"moz_user_app_lma_rankings_detail",account_owner_only:!1},{original:"local-search.lma.rankings-samples-expanded",transform:"moz_user_app_lma_rankings_samples_expanded",account_owner_only:!1},{original:"local-search.lma.site-setup-competitor-manual",transform:"moz_user_app_lma_site_setup_competitor_manual",account_owner_only:!1},{original:"local-search.lma.site-setup-completed",transform:"moz_user_app_lma_site_setup_completed",account_owner_only:!1},{original:"local-search.lma.site-setup-domain-from-campaign",transform:"moz_user_app_lma_site_setup_domain_from_campaign",account_owner_only:!1},{original:"local-search.lma.site-setup-domain-manual",transform:"moz_user_app_lma_site_setup_domain_manual",account_owner_only:!1},{original:"local-search.lma.site-setup-keywords-from-campaign",transform:"moz_user_app_lma_site_setup_keywords_from_campaign",account_owner_only:!1},{original:"local-search.lma.site-setup-keywords-manual",transform:"moz_user_app_lma_site_setup_keywords_manual",account_owner_only:!1},{original:"local-search.lma.site-setup-market-bundle",transform:"moz_user_app_lma_site_setup_market_bundle",account_owner_only:!1},{original:"local-search.lma.site-setup-market-manual-single",transform:"moz_user_app_lma_site_setup_market_manual_single",account_owner_only:!1},{original:"local-search.lma.site-setup-markets-from-campaign",transform:"moz_user_app_lma_site_setup_markets_from_campaign",account_owner_only:!1},{original:"local-search.lma.table-sort-interaction",transform:"moz_user_app_lma_table_sort_interaction",account_owner_only:!1},{original:"local-search.lma.tracking-competitor-add",transform:"moz_user_app_lma_tracking_competitor_add",account_owner_only:!1},{original:"local-search.lma.tracking-competitor-edit",transform:"moz_user_app_lma_tracking_competitor_edit",account_owner_only:!1},{original:"local-search.lma.demo-activated",transform:"moz_account_local_search_demo_activated",account_owner_only:!1},{original:"moz-inbound.forge.form-completed",condition:function(e){return window.location.pathname.startsWith("/checkout/item")&&"checkout/summary/create/single"===e.properties.formName},transform:"moz_user_video_purchase_clicked"},{original:"moz-inbound.forge.form-completed",condition:function(e){return"signup/community"===e.properties.formName&&!!e.properties.redirect},transform:"moz_user_app_community_signup_clicked"},{original:"moz-pro.experiment-displayed",transform:"Experiment Viewed",properties:{experiment_id:function(e){return e.properties.experimentId},variation_id:function(e){return e.properties.variant},experiment_name:function(e){return e.properties.experimentId},variation_name:function(e){return e.properties.variant}},integrations:{All:!1}},{original:"moz-inbound.cms.keywordexplorer-form-clicked",transform:"moz_user_app_cms_kwe_search_clicked",properties:{label:function(e){return e.properties.terms}},integrations:{All:!1,"Google Analytics":!0}},{original:"moz-inbound.cms.domainanalysis-form-clicked",transform:"moz_user_app_cms_domain_analysis_search_clicked",properties:{label:function(e){return e.properties.terms}},integrations:{All:!1,"Google Analytics":!0}},{original:"Video Playback Completed",transform:"Video Playback Completed",properties:{label:function(e){return e.properties.title},value:function(e){return e.properties.position_percent}},integrations:{All:!1,"Segment.io":!1,"Google Analytics":!0}}];var r="enabled"===localStorage.getItem("mtm_debug"),a={};try{var n=localStorage.getItem("mtm_debug_config");n&&(a=JSON.parse(n))}catch(e){a={}}function s(e){if(r){var t=a.filter;if(!t)return 1;if(t instanceof RegExp)return t.test(e);for(var o=t.split(","),n=0;n<o.length;n++)if(0<=e.indexOf(o[n]))return 1}}var m,c,l,_;function u(r){return _mtm.config.eventMaps.filter(function(e){return e.original.replace(/[^a-z0-9]/gi,"")===r.event.replace(/[^a-z0-9]/gi,"")}).reduce(function(e,t){var o=function(e,t){var o=t.transform||e.event,n={};if(t.properties)for(var r in t.properties){var a=t.properties[r];n[r]="function"==typeof a?a(e):a}return _mtm.helpers.isLoggedIn()&&(n.email=_mtm.helpers.getUser().email),{event:o,options:{integrations:Object.assign({All:!0,Intercom:!1},t.integrations||{}),properties:n}}}(r,t),n=_mtm.helpers.getUser();if((t.account_owner_only||_mtm.helpers.isLoggedIn())&&(!t.condition||t.condition(r))){if(t.account_owner_only&&!_mtm.helpers.isAccountAdmin()){if(_mtm.debugger.log("mtm:pre:track","account_owner_only"),!n)return;t="https://"+(_mtm.helpers.isProduction()?"moz.com":"staging.moz.com")+"/webhooks/track/event",n={event:o.event,user_id:n.account.owner_id,meta:o.properties||{}};n.meta.integrations=o.options.integrations,_mtm.helpers.request(t,{method:"POST",body:n},function(e){if(e)return console.error(e)})}else e.push(o);return e}},[])}window._mtm={config:window._mtm.config,debugger:{enable:function(e,t,o){!1!==e?(localStorage.setItem("mtm_debug","enabled"),localStorage.setItem("mtm_debug_config",JSON.stringify({config:o,filter:t})),s("segment")?analytics.debug():analytics.debug(!1),console.log("Debug mode enabled - please refresh the page")):(analytics.debug(!1),localStorage.setItem("mtm_debug",null))},log:function(e,t){s(e)&&console.log("%c"+e+"%c - "+t,"color: #89D6F3;","")},tagsExecuted:[]},events:[],helpers:{},tags:[],triggers:{}},m=window.history,c=m.pushState,m.pushState=function(e){"function"==typeof m.onpushstate&&m.onpushstate({state:e});var t=new CustomEvent("pushstate",{detail:e});return document.dispatchEvent(t),c.apply(m,arguments)},window.trackMozEvent=function(e,t,o){var n=window.analytics;if(t=t||{},o&&"[object Function]"==={}.toString.call(o)&&setTimeout(o,300),_mtm.helpers.isDevelopment())return _mtm.debugger.log("mtm:track:event",e,t);o=_mtm.helpers.getUser();o&&(t.account_id=_mtm.helpers.get(o,["account","id"])),n.track(e,t,{integrations:{All:!1,Intercom:!1}});t=u({event:e,properties:t});t&&t.forEach(function(e){_mtm.helpers.hasIntercom()||(e.options=e.options||{},e.options.integrations=e.options.integrations||{},e.options.integrations.Intercom=!1),n.track(e.event,e.properties,e.options),_mtm.triggers.triggerSupportedEvent(e.event,e.properties,e.options)})},window.trackMozPage=function(){console.warn("trackMozPage is deprecated.")},window._mtm.trackMozPage=function(e,t,o){t.pageData||(t.pageData={env:_mtm.config.env,service:_mtm.config.service,team:_mtm.config.team}),o&&"[object Function]"==={}.toString.call(o)&&setTimeout(o,300);o=_mtm.helpers.get(window,["activeCampaign","campaign_id"]);o&&(t.pageData.pro_campaign_id=o)!==analytics.user().traits().pro_campaign_id&&analytics.identify({pro_campaign_id:o}),t.category?analytics.page(t.category,e,t.pageData):analytics.page(e,t.pageData)},window.trackMozError=function(t,o){if(o&&"[object Function]"==={}.toString.call(o)&&o(),!t.message)return console.error("trackMozError: Must include a message");["service","team","page"].forEach(function(e){t[e]=t[e]||_mtm.config[e]}),t.url||(t.url=window.location.href),_mtm.triggers.segmentLoaded(function(){t.session_id=analytics.user().anonymousId(),t.user_id=analytics.user().id();var e="https://"+(_mtm.helpers.isProduction()?"moz.com":"staging.moz.com")+"/webhooks/track/error";_mtm.helpers.request(e,{method:"POST",body:t},function(e){if(e)return o(e)})})},l="_gaexp",_=localStorage.getItem(l),(n=document.cookie.match(new RegExp(l+"=(.+?)(;|$)")))?_&&_===n[1]||localStorage.setItem(l,n[1]):_&&(document.cookie=l+"="+_),_mtm.helpers.mapEvent=u,window._satellite={getVar:function(){console.warn("_satellite.getVar is deprecated.")},pageBottom:function(){console.warn("_satellite.pageBottom is deprecated")},track:function(){console.warn("_satellite.track is deprecated.")}};_mtm.helpers.asyncHide=function(){return e=window,t=document.documentElement,o="async-hide",n="dataLayer",r=_mtm.helpers.isProduction()?{"GTM-NCDDFRJ":!0}:{"GTM-PWJ8R77":!0},i=document.createElement("style"),document.head.appendChild(i),i.sheet.insertRule(".async-hide { opacity: 0 !important}"),t.className+=" "+o,r.start=+new Date,r.end=a=function(){_mtm.debugger.log("mtm:helpers:asyncHide","end"),t.className=t.className.replace(RegExp(" ?"+o),"")},(e[n]=e[n]||[]).hide=r,setTimeout(function(){a(),r.end=null},4e3),void(r.timeout=4e3);var e,t,o,n,r,a,i};_mtm.helpers.cookie={get:function(e){e=("; "+document.cookie).split("; "+e+"=");if(2===e.length)return e.pop().split(";").shift()},remove:function(e){document.cookie=e+"=; domain=moz.com; expires=Thu, 01 Jan 1970 00:00:01 GMT;"}};_mtm.helpers.isProduction=function(){return 0===window._mtm.config.env.indexOf("prod")};_mtm.helpers.isDevelopment=function(){return 0===window._mtm.config.env.indexOf("dev")},_mtm.helpers.fetchCurrentUser=function(o){var e=_mtm.helpers.isProduction()?"https://moz.com":"https://staging.moz.com";_mtm.helpers.request(e+"/svc/session",{withCredentials:!0},function(e,t){return e?o(e,null):void o(null,_mtm.helpers.get(t,["user"]))})};_mtm.helpers.flashMessage=function(e,t,o,n){e=document.querySelector(e);return e?t?({primary:!0,success:!0,danger:!0,warning:!0}[o]&&(o="alert alert-"+o,n&&(o+=" "+n),e.className=o),e.innerHTML=function(e){var t=document.createElement("div");t.innerHTML=e;for(var o=t.getElementsByTagName("script"),n=0;n<o.length;n++)o[n].parentNode.removeChild(o[n]);return t.innerHTML}(t),!0):(_mtm.debugger.log("mtm:helpers:flashMessage","No message for flash message found"),!1):(_mtm.debugger.log("mtm:helpers:flashMessage","No element for flash message found"),!1)};_mtm.helpers.get=function(e,t){return e?t.reduce(function(e,t){return e&&e[t]?e[t]:null},e):null};_mtm.helpers.isPage=function(e){return e instanceof RegExp?e.test(window.location.pathname):0===window.location.pathname.indexOf(e)};_mtm.helpers.loadHTML=function(t,e){var o=new XMLHttpRequest;e.includes("moz.com")?(o.open("GET",e,!0),o.onload=function(){var e;200<=o.status&&o.status<400&&(e=o.responseText,document.querySelector(t).innerHTML=e)},o.send()):_mtm.debugger.log("mtm:helpers:loadHTML","Invalid URL being loaded - "+e)};_mtm.helpers.loadScript=function(e){var t=document.createElement("script");return t.src=e,document.body.appendChild(t),t};window._mtm.helpers.onDomChange=function(t,e,o){var n=new MutationObserver(function(e){e.forEach(function(e){"attributes"===e.type?o(e.target):e.addedNodes.forEach(function(e){e.matches&&e.matches(t)&&o(e)})})});return n.observe(document.documentElement,{attributeFilter:e,childList:!0,subtree:!0}),n};_mtm.helpers.request=function(e,t,o){t=t||{};var n=new XMLHttpRequest,r=!1,a=1e3;t.timeout&&(a=t.timeout);var i=setTimeout(function(){r||o(new Error("Request Timeout"))},a);n.open(t.method||"GET",e,!0),n.setRequestHeader("Content-type","application/json"),n.withCredentials=t.withCredentials||!1,n.onreadystatechange=function(){if(n.readyState===XMLHttpRequest.DONE&&o&&"[object Function]"==={}.toString.call(o)){var e={},t=null;try{e=JSON.parse(n.responseText)}catch(e){t=new Error("Invalid JSON response")}200!==n.status&&(t=e,e=null),r=!0,clearTimeout(i),o(t,e)}},n.send(JSON.stringify(t.body))};_mtm.helpers.getUser=function(){return _mtm.helpers.get(window,["_mgn","user"])};_mtm.helpers.isLoggedIn=function(){return!!_mtm.helpers.getUser()};_mtm.helpers.isPro=function(){var e=_mtm.helpers.getUser();return"active"===_mtm.helpers.get(e,["account","products","search","status"])};_mtm.helpers.isLocal=function(){var e=_mtm.helpers.getUser();return!!_mtm.helpers.get(e,["local_push"])};_mtm.helpers.isLocalManaged=function(){var e=_mtm.helpers.getUser();return 1===_mtm.helpers.get(e,["account_services","local","limits","managed"])};_mtm.helpers.isLocalMigrated=function(){var e=_mtm.helpers.getUser();return!!_mtm.helpers.get(e,["account_services","local","limits","migration_complete_at"])};_mtm.helpers.isLMA=function(){var e=_mtm.helpers.getUser();return!!_mtm.helpers.get(e,["account_services","search","limits","local_search"])};_mtm.helpers.isAdmin=function(){var e=_mtm.helpers.getUser();return e&&!(!e.admin&&!e.admin_id)};_mtm.helpers.isAccountAdmin=function(){var e=_mtm.helpers.getUser();if(!e)return!1;for(var t=0;t<e.accounts.length;t++){var o=e.accounts[t];if(o.owner_id===window._mgn.user.id&&-1!==o.products.indexOf("search"))return!0;if(-1!==o.products.indexOf("account"))return!0}return!1};_mtm.helpers.isAccountOwner=function(){var e=_mtm.helpers.getUser();if(!e)return!1;for(var t=0;t<e.accounts.length;t++)if(e.accounts[t].owner_id===window._mgn.user.id)return!0},_mtm.helpers.isSubscriber=function(){var e=_mtm.helpers.getUser();if(!e)return!1;for(var t=0;t<e.accounts.length;t++)if(-1!==e.accounts[t].products.indexOf("search")||-1!==e.accounts[t].products.indexOf("api")||-1!==e.accounts[t].products.indexOf("local"))return!0};_mtm.helpers.isFreetrialer=function(){var e=_mtm.helpers.getUser();if(!_mtm.helpers.isPro())return!1;e=_mtm.helpers.get(e,["account","products","search","trial_expires_at"]);return new Date(1e3*e)>new Date};_mtm.helpers.hasIntercom=function(){var e=_mtm.helpers.getUser();return _mtm.helpers.isPro()&&"pro_student"!==e.account_services.search.level&&"moz-pro"==_mtm.config.team},_mtm.helpers.uuid=function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e)},_mtm.tags.push({name:"Bizzabo Events",description:"    Listens for events being sent from the Bizzabo iframe     and forwards them to Segment   ",condition:function(e){_mtm.helpers.isPage("/mozcon/register")&&e()},execute:function(){var t=["https://accounts.bizzabo.com"];window.addEventListener("message",function(e){-1!==t.indexOf(e.origin)&&"trackMozEvent"===_mtm.helpers.get(e,["data","type"])&&trackMozEvent(e.data.name)},!1)}}),_mtm.tags.push({name:"Flash Message",description:"Checks for flash message cookie and displays message",condition:function(e){_mtm.triggers.initial(function(){0<=document.cookie.indexOf("moz_flash_message=")&&e()})},execute:function(){var e,t,o=_mtm.helpers.cookie.get("moz_flash_message");o&&(t=(e=o.split("__FM_SPLIT__"))[0].replace(/\+/g,"%20"),o=decodeURIComponent(t),t="info",1<e.length&&(t=e[1]),_mtm.helpers.flashMessage("#flashMessage",o,t)&&_mtm.helpers.cookie.remove("moz_flash_message"))}}),_mtm.tags.push({name:"GTM user data",description:"Pushes user data for GTM",condition:function(e){_mtm.triggers.segmentLoaded(function(){_mtm.triggers.user(function(){_mtm.helpers.isLoggedIn()&&e()})})},execute:function(){window.dataLayer=window.dataLayer||[];var e=_mtm.helpers.getUser();window.dataLayer.push({account:e.account,account_services:e.account_services,accounts:e.accounts,admin:e.admin,display_name:e.display_name,email:e.email,full_name:e.full_name,id:e.id,isPro:_mtm.helpers.isPro(),isLocal:_mtm.helpers.isLocal(),isLocalManaged:_mtm.helpers.isLocalManaged(),isLMA:_mtm.helpers.isLMA(),isAdmin:_mtm.helpers.isAdmin(),isSubscriber:_mtm.helpers.isSubscriber(),isAccountOwner:_mtm.helpers.isAccountOwner(),isFreetrialer:_mtm.helpers.isFreetrialer(),qa_access_level:e.qa_access_level})}});function p(e){var t=localStorage.getItem("lo_sample");return null===t&&(t=Math.random(),localStorage.setItem("lo_sample",t)),t<=e}function d(e){e.classList.add("lo_sensitive")}var g=134826,f=142476;document.querySelectorAll("[data-sensitive]").forEach(d),_mtm.tags.push({name:"Lucky Orange",description:"Loads Lucky Orange (https://www.luckyorange.com/) onto the page",condition:function(e){_mtm.triggers.user(function(){return _mtm.helpers.isAdmin()?(-1==document.cookie.indexOf("_global_lucky_opt_out")&&(document.cookie="_global_lucky_opt_out=1"),e()):"rpt"==_mtm.config.team||!(/(bot|google|baidu|bing|msn|teoma|slurp|yandex)/i.test(navigator.userAgent)||navigator&&/.*IN$/.test(navigator.language)||_mtm.helpers.isDevelopment())&&(/\/(checkout|subscriptions|account|notifications|email)/.test(window.location.pathname)&&p(.1)||/\/(products|lander|moz-pro-free-trial)/.test(window.location.pathname)&&p(.1)||_mtm.helpers.isSubscriber()&&p(.1)||p(.01))?e():void 0})},execute:function(){_mtm.helpers.onDomChange("[data-sensitive]",["data-sensitive"],d);var e,e=!(e=_mtm.helpers.getUser())||_mtm.helpers.isAdmin()?{}:{name:e.full_name,email:e.email,user_id:e.id,mozpoints:e.mozpoints,pro_plan:_mtm.helpers.isPro()?e.account.products.search.name:null,local_locations:_mtm.helpers.isLocal()?e.local_push:null,is_owner:_mtm.helpers.isAccountAdmin(),is_lma:_mtm.helpers.isLMA()};window._loq=window._loq||[],window._loq.push(["custom",e]),_mtm.helpers.isFreetrialer()?window._loq.push(["tag","Pro Freetrialer"]):_mtm.helpers.isAccountAdmin()&&window._loq.push(["tag","Pro Vested"]),_mtm.helpers.isLocal()&&window._loq.push(["tag","Local Customer"]),_mtm.helpers.isLMA()&&window._loq.push(["tag","LMA Customer"]),_mtm.triggers.supportedEvent(function(e,t){"Experiment Viewed"===e&&(e=["Experiment",t.experiment_name,t.variation_name].join(": ")),window._loq=window._loq||[],window._loq.push(["tag",e])}),window.__lo_site_id=_mtm.helpers.isProduction()?g:f,_mtm.helpers.loadScript("https://d10lpsik1i8c69.cloudfront.net/w.js")}}),_mtm.tags.push({name:"NodeBB Alert/Modal",description:"Fires an error event when an alert is shown in Q&A (NodeBB)",condition:function(e){_mtm.helpers.onDomChange(".bootbox",[],e)},execute:function(e){var t=e.querySelector(".bootbox-body");t&&t.innerText.includes("error")?((e={message:e.querySelector(".bootbox-body").innerText}).message.startsWith("[")&&(e.category=e.message),trackMozError(e)):_mtm.debugger.log("mtm:tags:nodebb","no alert body")}});var h="Qp2TmR5oQRJsZ9KZyDDTWjuJfcEpg23l",w="P4i8yu85MjixE059Nt2606lg9H9Qooau";_mtm.tags.push({name:"Segment (analytics.js)",description:"Loads Segment then fires pageload and identify calls",condition:function(e){_mtm.helpers.isDevelopment()||e()},execute:function(){var r=_mtm.helpers.isProduction()?h:w,a={integrations:{Chameleon:!1,Intercom:!1,Mixpanel:!1}};_mtm.debugger.Segment={},_mtm.triggers.user(function(){var e,t,o=_mtm.helpers.getUser();_mtm.helpers.isSubscriber()&&"pro_student"!==o.account_services.search.level&&"inbound"!==_mtm.config.team&&(a.integrations.Chameleon=!0,_mtm.helpers.isPage("/pro/welcome")||(a.integrations.AdWords=!1,a.integrations["Bing Ads"]=!1,a.integrations["Facebook Pixel"]=!1,a.integrations["LinkedIn Insight Tag"]=!1,a.integrations["Quora Conversion Pixel"]=!1,a.integrations["Twitter Ads"]=!1)),_mtm.helpers.hasIntercom()&&(a.integrations.Intercom=!0,a.integrations.Mixpanel=!0),"hubspot"===_mtm.config.service&&(a.integrations.HubSpot=!1),_mtm.debugger.Segment.integrationsDisabled={},Object.keys(a.integrations).forEach(function(e){!1===a.integrations[e]&&(_mtm.debugger.Segment.integrationsDisabled[e]=!1)}),analytics.load(r,a),o&&(t={email:o.email,pro_plan:_mtm.helpers.isPro()?o.account.products.search.name:null,local_locations:_mtm.helpers.isLocal(),is_owner:_mtm.helpers.isAccountAdmin(),is_lma:_mtm.helpers.isLMA(),is_freetrial:_mtm.helpers.isFreetrialer()},(e=window.location.search.match(/source=([^&]+)/))&&(t.app_source=e[1]),analytics.identify(o.id,t),t={id:o.account.id,is_paying:_mtm.helpers.isPro()&&!_mtm.helpers.isFreetrialer(),name:o.account.name,planLevel:t.pro_plan},analytics.group(t.id,t));var n={team:_mtm.config.team,service:_mtm.config.service,env:_mtm.config.env};o&&(n.accountId=o.account.id),_mtm.config.disableAutotrack?_mtm.debugger.log("mtm:track:page","Auto Page tracking disabled"):_mtm.triggers.page(function(){var t=window.location.href;setTimeout(function(){t!==window.location.href&&(n.referrer=t);var e=_mtm.helpers.get(window,["activeCampaign","campaign_id"]);e&&(n.pro_campaign_id=e)!==analytics.user().traits().pro_campaign_id&&analytics.identify({pro_campaign_id:e});e=null;_mtm.config.page&&_mtm.config.service&&(e=_mtm.config.service+"-"+_mtm.config.page),_mtm.config.category?(n.category=_mtm.config.category,analytics.page(_mtm.config.category,e,n)):analytics.page(e,n)},0)})})}}),_mtm.tags.push({name:"Stripe Radar",description:"Loads stripe for Radar - https://stripe.com/docs/radar",condition:function(e){_mtm.helpers.isProduction()&&e()},execute:function(){_mtm.triggers.initial(function(){_mtm.helpers.loadScript("https://js.stripe.com/v3/")})}}),_mtm.tags.push({name:"Wistia",description:"Tracks video plays: https://segment.com/docs/spec/video",condition:function(e){window._wq=window._wq||[],_wq.push({id:"_all",onReady:e})},execute:function(i){i.bind("play",function(){trackMozEvent("Video Playback Started",{session_id:i._containerId,content_asset_id:i.hashedId(),position:i.secondsWatched(),total_length:i.duration(),video_player:"wistia",sound:i.volume(),title:i.name()}),i.unbind}),i.bind("percentwatchedchanged",function(e,t){var o=[.25,.5,.75],n=[];if("playing"===i.state())for(var r=0;r<o.length;r++){var a=o[r];a<=e&&t<a&&-1===n.indexOf(i.hashedId()+a)&&(n[i.hashedId()+r]=!0,trackMozEvent("Video Content Playing",{session_id:i._containerId,asset_id:i.hashedId(),title:i.name(),position:i.secondsWatched(),position_percent:a,total_length:i.duration()}))}}),i.bind("end",function(){trackMozEvent("Video Playback Completed",{session_id:i._containerId,content_asset_id:i.hashedId(),position:i.secondsWatched(),total_length:i.duration(),video_player:"wistia",sound:i.volume(),title:i.name()}),i.unbind})}});window._mtm.triggers.click=function(t,o){_mtm.triggers.initial(function(){var e=document.querySelector(t);e?e.addEventListener("click",function(){_mtm.debugger.log("mtm:trigger:executed","Element was clicked "+t),o(arguments)}):_mtm.debugger.log(t,"element not found")})};var v=[];document.addEventListener("DOMContentLoaded",function(){v.forEach(function(e){e()}),_mtm.debugger.log("mtm:trigger:executed","Initial page loaded"),v=[]}),window._mtm.triggers.initial=function(e){"loading"!==document.readyState?e():v.push(e)};var y=[];window._mtm.triggers.page=function(e){y.push(e),"loading"!==document.readyState&&e()};window._mtm.triggers.triggerPage=function(e){var t=_mtm.helpers.get(e,["detail","urlPath"]),e="Page view detected";t&&(e+=" - "+window.location.protocol+window.location.host+t),_mtm.debugger.log("mtm:trigger:executed",e),y.forEach(function(e){e()})};window._mtm.triggers.clearPageQueue=function(){y=[]},document.addEventListener("DOMContentLoaded",window._mtm.triggers.triggerPage),document.addEventListener("pushstate",window._mtm.triggers.triggerPage);var b=[],k=!1;window._mtm.triggers.segmentLoaded=function(e){k?e():b.push(e)};window._mtm.triggers.triggerSegmentLoaded=function(){_mtm.debugger.log("mtm:trigger:executed","analytics.js was loaded"),k=!0,b.forEach(function(e){e()}),b=[]};var z=[];window._mtm.triggers.supportedEvent=function(e){z.push(e)};window._mtm.triggers.triggerSupportedEvent=function(t,o,n){_mtm.debugger.log("mtm:trigger:executed","Supported Event fired: "+t),z.forEach(function(e){e(t,o,n)})};var E=[],A=!1;window._mtm.triggers.user=function(e){if(A)return e(_mtm.helpers.getUser());E.push(e)};document.addEventListener("mozuser",function(){A=!0;var t=_mtm.helpers.getUser();E.forEach(function(e){e(t)});var e=_mtm.helpers.get(t,["id"]);_mtm.debugger.log("mtm:trigger:executed",e?"User found: "+e:"No user found"),E=[]});function x(){var e=new CustomEvent("mozuser");document.dispatchEvent(e),L.disconnect()}var L=null,L=new MutationObserver(function(){!A&&window._mgn&&window._mgn.user&&x()});document.addEventListener("DOMContentLoaded",function(){!_mtm.helpers.get(window,["_mgn","user"])&&_mtm.helpers.get(window,["_mgn","fetch_user"])||x()}),L.observe(document.documentElement,{childList:!0});var S=[],I=new MutationObserver(function(){S.foreach(function(e){var t=document.querySelector(e.selector);t&&(e.callback(t),_mtm.debugger.log("mtm:trigger:executed","Element is visible "+e.selector),S.splice(i,1),0===S.length&&I.disconnect())})});window._mtm.triggers.visible=function(e,t){var o=document.querySelector(e);o&&(_mtm.debugger.log("mtm:trigger:executed","Element is visible "+e),t(o)),0===S.length&&I.observe(document.documentElement,{childList:!0,subtree:!0}),S.push({callback:t,selector:e})},_mtm.tags.forEach(function(e){e.condition(function(){_mtm.debugger.log("mtm:debugger:tag:execute",e.name),_mtm.debugger.tagsExecuted.push(e),e.execute.apply(this,arguments)})})},{}]},{},[1]);
//# sourceMappingURL=mtm.min.js.map
